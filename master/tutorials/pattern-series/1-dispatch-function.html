
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Function Dispatch &#8212; Footings 0.10.0 documentation</title>
    
  <link rel="stylesheet" href="../../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Actuarial Series" href="../actuarial-series/index.html" />
    <link rel="prev" title="Pattern Series" href="index.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    <a class="navbar-brand" href="../../index.html">
    
      <p class="title">Footings</p>
    
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item ">
            <a class="nav-link" href="../../installation.html">Installation</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../principles.html">Principles</a>
        </li>
        
        <li class="nav-item active">
            <a class="nav-link" href="../index.html">Tutorials</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../api.html">API</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../license.html">License</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../changelog.html">Changelog</a>
        </li>
        
        
      </ul>


      <form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this site..." aria-label="Search this site..." autocomplete="off" >
</form>
      

      <ul class="navbar-nav">
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/footings/footings" target="_blank" rel="noopener">
              <span><i class="fab fa-github-square"></i></span>
            </a>
          </li>
        
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar"><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

    <div class="bd-toc-item active">
    
  
    <ul class="nav bd-sidenav">
        
        
        
        
        
        
          
            
                <li class="">
                    <a href="../intro-series/index.html">Intro Series</a>
                </li>
            
          
            
  
                <li class="active">
                    <a href="index.html">Pattern Series</a>
                    <ul>
                    
                        <li class="active">
                            <a href="">Function Dispatch</a>
                        </li>
                    
                    </ul>
                </li>
            
          
            
                <li class="">
                    <a href="../actuarial-series/index.html">Actuarial Series</a>
                </li>
            
          
        
        
        
        
        
        
        
        
      </ul>
  
  </nav>
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#introduction" class="nav-link">Introduction</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#dispatch-function" class="nav-link">Dispatch Function</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#closing" class="nav-link">Closing</a>
        </li>
    
    </ul>
</nav>


              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="function-dispatch">
<h1>Function Dispatch<a class="headerlink" href="#function-dispatch" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Often times when building actuarial models, we want arguments to trigger different functions. A good example of this is when we have multiple assumption sets (e.g., stat, gaap, best-estimate) supporting a model and when we run the model we need to trigger functions that read data from the respective assumption set. This pattern can be coded using an ifelse block</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># if assumption_set == &quot;stat&quot;:</span>
<span class="c1">#     assumptions = load_assumptions(&quot;./stat/&quot;)</span>
<span class="c1"># elif assumption_set == &quot;gaap&quot;:</span>
<span class="c1">#     assumptions = load_assumptions(&quot;./gaap/&quot;)</span>
<span class="c1"># elif assumption_se == &quot;best-estimate&quot;:</span>
<span class="c1">#     assumptions = load_assumptions(&quot;./best-estimate/&quot;)</span>
</pre></div>
</div>
</div>
</div>
<p>However, each time an assumption set is added, one needs to go into the code block and add the respective logic. Another pattern exists within python using decorators. An example of this is how the <a class="reference external" href="https://docs.python.org/3/glossary.html#term-single-dispatch">singledispatch</a> function works. This is preferred because it does not require entering the body of a function to change an ifelse block.</p>
</div>
<div class="section" id="dispatch-function">
<h2>Dispatch Function<a class="headerlink" href="#dispatch-function" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">footings</span></code> library has a function called <a class="reference external" href="../../generated/footings.dispatch_function.html#footings.dispatch_function">dispatch_function</a> that can be used to solve the problem of creating a single function that calls different functions based on passed parameters. An example of using this is shown in the code below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">footings.utils</span> <span class="kn">import</span> <span class="n">dispatch_function</span>

<span class="nd">@dispatch_function</span><span class="p">(</span><span class="n">key_parameters</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;reporting_type&quot;</span><span class="p">,))</span>
<span class="k">def</span> <span class="nf">add_ctr</span><span class="p">(</span><span class="n">reporting_type</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;No default function is implemented&quot;</span><span class="p">)</span>

<span class="nd">@add_ctr</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">reporting_type</span><span class="o">=</span><span class="s2">&quot;STAT&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="n">frame</span><span class="p">):</span>
    <span class="n">frame</span><span class="p">[</span><span class="s2">&quot;CTR&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.02</span>
    <span class="k">return</span> <span class="n">frame</span>

<span class="nd">@add_ctr</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">reporting_type</span><span class="o">=</span><span class="s2">&quot;GAAP&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="n">frame</span><span class="p">):</span>
    <span class="n">frame</span><span class="p">[</span><span class="s2">&quot;CTR&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.015</span>
    <span class="k">return</span> <span class="n">frame</span>

<span class="nd">@add_ctr</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">reporting_type</span><span class="o">=</span><span class="s2">&quot;BEST-ESTIMATE&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="n">frame</span><span class="p">):</span>
    <span class="n">frame</span><span class="p">[</span><span class="s2">&quot;CTR&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.01</span>
    <span class="k">return</span> <span class="n">frame</span>


<span class="n">frame</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;DURATION&quot;</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)})</span>

<span class="n">frame</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>DURATION</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">add_ctr</span><span class="p">(</span><span class="n">reporting_type</span><span class="o">=</span><span class="s2">&quot;STAT&quot;</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="n">frame</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>DURATION</th>
      <th>CTR</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>0.02</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>0.02</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>0.02</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>0.02</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">add_ctr</span><span class="p">(</span><span class="n">reporting_type</span><span class="o">=</span><span class="s2">&quot;GAAP&quot;</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="n">frame</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>DURATION</th>
      <th>CTR</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>0.015</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>0.015</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>0.015</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>0.015</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">add_ctr</span><span class="p">(</span><span class="n">reporting_type</span><span class="o">=</span><span class="s2">&quot;BEST-ESTIMATE&quot;</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="n">frame</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>DURATION</th>
      <th>CTR</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>0.01</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>0.01</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>0.01</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>0.01</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="closing">
<h2>Closing<a class="headerlink" href="#closing" title="Permalink to this headline">¶</a></h2>
<p>Using <code class="docutils literal notranslate"><span class="pre">dispatch_function</span></code> as a pattern is useful when one is trying to create a single function that has the capability to call different functions based on the passed parameters.</p>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="index.html" title="previous page">Pattern Series</a>
    <a class='right-next' id="next-link" href="../actuarial-series/index.html" title="next page">Actuarial Series</a>

              </div>
              
          </main>
          

      </div>
    </div>

    
  <script src="../../_static/js/index.d3f166471bb80abb5163.js"></script>


    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2020, Dustin Tindall.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.5.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>