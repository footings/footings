
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Attributes and Instantiation &#8212; Footings 0.10.0rc1 documentation</title>
    
  <link rel="stylesheet" href="../../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Documenting Models" href="3-documenting-models.html" />
    <link rel="prev" title="Building a Model" href="1-building-a-model.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    <a class="navbar-brand" href="../../index.html">
    
      <p class="title">Footings</p>
    
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item ">
            <a class="nav-link" href="../../installation.html">Installation</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../principles.html">Principles</a>
        </li>
        
        <li class="nav-item active">
            <a class="nav-link" href="../index.html">Tutorials</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../api.html">API</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../license.html">License</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../changelog.html">Changelog</a>
        </li>
        
        
      </ul>


      <form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this site..." aria-label="Search this site..." autocomplete="off" >
</form>
      

      <ul class="navbar-nav">
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/footings/footings" target="_blank" rel="noopener">
              <span><i class="fab fa-github-square"></i></span>
            </a>
          </li>
        
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar"><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

    <div class="bd-toc-item active">
    
  
    <ul class="nav bd-sidenav">
        
        
        
        
        
        
          
            
  
                <li class="active">
                    <a href="index.html">Intro Series</a>
                    <ul>
                    
                        <li class="">
                            <a href="1-building-a-model.html">Building a Model</a>
                        </li>
                    
                        <li class="active">
                            <a href="">Attributes and Instantiation</a>
                        </li>
                    
                        <li class="">
                            <a href="3-documenting-models.html">Documenting Models</a>
                        </li>
                    
                        <li class="">
                            <a href="4-running-models.html">Running Models</a>
                        </li>
                    
                        <li class="">
                            <a href="5-auditing-models.html">Auditing Models</a>
                        </li>
                    
                    </ul>
                </li>
            
          
            
                <li class="">
                    <a href="../pattern-series/index.html">Pattern Series</a>
                </li>
            
          
        
        
        
        
        
        
        
        
      </ul>
  
  </nav>
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#introduction" class="nav-link">Introduction</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#inspecting-the-model" class="nav-link">Inspecting the Model</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#an-instantiated-model" class="nav-link">An Instantiated Model</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#arguments-to-def" class="nav-link">Arguments to def_*</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#additional-def-functions" class="nav-link">Additional def_* functions</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#closing" class="nav-link">Closing</a>
        </li>
    
    </ul>
</nav>


              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="attributes-and-instantiation">
<h1>Attributes and Instantiation<a class="headerlink" href="#attributes-and-instantiation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This is the second tutorial in the <a class="reference internal" href="index.html"><span class="doc std std-doc">Intro Series</span></a>. Here we will do a deeper dive into attributes and instantiation of models.</p>
<p>We will start with the model code from the <a class="reference internal" href="1-building-a-model.html"><span class="doc std std-doc">prior tutorial</span></a> which is shown below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">footings.model</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">model</span><span class="p">,</span>
    <span class="n">step</span><span class="p">,</span>
    <span class="n">def_parameter</span><span class="p">,</span>
    <span class="n">def_intermediate</span><span class="p">,</span>
    <span class="n">def_return</span><span class="p">,</span>
<span class="p">)</span>

<span class="nd">@model</span><span class="p">(</span><span class="n">steps</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;_add_a_b&quot;</span><span class="p">,</span> <span class="s2">&quot;_add_ab_c&quot;</span><span class="p">])</span>
<span class="k">class</span> <span class="nc">AddABC</span><span class="p">:</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">def_parameter</span><span class="p">()</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">def_parameter</span><span class="p">()</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">def_parameter</span><span class="p">()</span>
    <span class="n">ab</span> <span class="o">=</span> <span class="n">def_intermediate</span><span class="p">()</span>
    <span class="n">abc</span> <span class="o">=</span> <span class="n">def_return</span><span class="p">()</span>

    <span class="nd">@step</span><span class="p">(</span><span class="n">uses</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span> <span class="n">impacts</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;ab&quot;</span><span class="p">])</span>
    <span class="k">def</span> <span class="nf">_add_a_b</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ab</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span>

    <span class="nd">@step</span><span class="p">(</span><span class="n">uses</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;ab&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">],</span> <span class="n">impacts</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;abc&quot;</span><span class="p">])</span>
    <span class="k">def</span> <span class="nf">_add_ab_c</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">abc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ab</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="inspecting-the-model">
<h2>Inspecting the Model<a class="headerlink" href="#inspecting-the-model" title="Permalink to this headline">¶</a></h2>
<p>To get a better understanding of the model objected, call <code class="docutils literal notranslate"><span class="pre">getfullargspec</span></code> on the <code class="docutils literal notranslate"><span class="pre">AddABC</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">inspect</span> <span class="kn">import</span> <span class="n">getfullargspec</span>
<span class="n">inspection</span> <span class="o">=</span> <span class="n">getfullargspec</span><span class="p">(</span><span class="n">AddABC</span><span class="p">)</span>
<span class="n">inspection</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>FullArgSpec(args=[&#39;self&#39;], varargs=None, varkw=None, defaults=None, kwonlyargs=[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;], kwonlydefaults=None, annotations={&#39;return&#39;: None})
</pre></div>
</div>
</div>
</div>
<p>The first thing one should notice is <code class="docutils literal notranslate"><span class="pre">args</span></code> is equal to <code class="docutils literal notranslate"><span class="pre">[]</span></code>. This means there are no arguments that can be passed in without being assigned to a keyword. Looking at the attribute <code class="docutils literal notranslate"><span class="pre">kwonlyags</span></code> we see the 3 parameters - <code class="docutils literal notranslate"><span class="pre">['a',</span> <span class="pre">'b',</span> <span class="pre">'c']</span></code> that were defined using <code class="docutils literal notranslate"><span class="pre">def_parameter</span></code>. Neither <code class="docutils literal notranslate"><span class="pre">ab</span></code> nor <code class="docutils literal notranslate"><span class="pre">abc</span></code> appear in the inspection because they were defined using <code class="docutils literal notranslate"><span class="pre">def_intermediate</span></code> and <code class="docutils literal notranslate"><span class="pre">def_return</span></code> which excludes them from the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method of the model.</p>
<p>This can be tested by running the following line of code which will return an error.</p>
<div class="cell tag_raises-exception docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">AddABC</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">TypeError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">3</span><span class="o">-</span><span class="n">c186c444e43c</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">AddABC</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

<span class="ne">TypeError</span>: __init__() takes 1 positional argument but 4 were given
</pre></div>
</div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">Footings</span> <span class="pre">framework</span></code> intentionally make the models key word only objects as many in order to be explicit when models have many parameters.</p>
</div>
<div class="section" id="an-instantiated-model">
<h2>An Instantiated Model<a class="headerlink" href="#an-instantiated-model" title="Permalink to this headline">¶</a></h2>
<p>To instantiate the model, we will pass arguments using key words as shown below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="n">AddABC</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Once a model has been instantiated, the parameters appear as attributes under the model.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;attribute a = </span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">a</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;attribute b = </span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">b</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;attribute c = </span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">c</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>attribute a = 1
attribute b = 2
attribute c = 3
</pre></div>
</div>
</div>
</div>
<p>These attributes are frozen and cannot be modified. The below code will demonstrate this.</p>
<div class="cell tag_raises-exception docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">FrozenAttributeError</span><span class="g g-Whitespace">                      </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">6</span><span class="o">-</span><span class="n">b270d9fb6228</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">model</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="mi">0</span>

<span class="nn">~/.cache/pypoetry/virtualenvs/footings-ICPKjIpj-py3.8/lib/python3.8/site-packages/attr/_make.py</span> in <span class="ni">__setattr__</span><span class="nt">(self, name, val)</span>
<span class="g g-Whitespace">    </span><span class="mi">913</span>                 <span class="n">nval</span> <span class="o">=</span> <span class="n">val</span>
<span class="g g-Whitespace">    </span><span class="mi">914</span>             <span class="k">else</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">915</span>                 <span class="n">nval</span> <span class="o">=</span> <span class="n">hook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">916</span> 
<span class="g g-Whitespace">    </span><span class="mi">917</span>             <span class="n">_obj_setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">nval</span><span class="p">)</span>

<span class="nn">~/.cache/pypoetry/virtualenvs/footings-ICPKjIpj-py3.8/lib/python3.8/site-packages/attr/setters.py</span> in <span class="ni">frozen</span><span class="nt">(_, __, ___)</span>
<span class="g g-Whitespace">     </span><span class="mi">33</span>     <span class="o">..</span> <span class="n">versionadded</span><span class="p">::</span> <span class="mf">20.1</span><span class="o">.</span><span class="mi">0</span>
<span class="g g-Whitespace">     </span><span class="mi">34</span>     <span class="s2">&quot;&quot;&quot;</span>
<span class="ne">---&gt; </span><span class="mi">35</span><span class="s2">     raise FrozenAttributeError()</span>
<span class="g g-Whitespace">     </span><span class="mi">36</span><span class="s2"> </span>
<span class="g g-Whitespace">     </span><span class="mi">37</span><span class="s2"> </span>

<span class="ne">FrozenAttributeError</span>: 
</pre></div>
</div>
</div>
</div>
<p>In addition, the attributes defined using <code class="docutils literal notranslate"><span class="pre">def_return</span></code> and <code class="docutils literal notranslate"><span class="pre">def_intermediate</span></code> also appear as attributes under the model object. Though, they have a value of <code class="docutils literal notranslate"><span class="pre">None</span></code> as shown below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;attribute ab  = </span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">ab</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;attribute abc = </span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">abc</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>attribute ab  = None
attribute abc = None
</pre></div>
</div>
</div>
</div>
<p>These attributes are not frozen so when the model is run the different steps within the model can modify these attributes. This can be tested using the following code.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="o">.</span><span class="n">ab</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">model</span><span class="o">.</span><span class="n">ab</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="arguments-to-def">
<h2>Arguments to def_*<a class="headerlink" href="#arguments-to-def" title="Permalink to this headline">¶</a></h2>
<p>Returning to the code of our example model -</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">footings.model</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">model</span><span class="p">,</span>
    <span class="n">step</span><span class="p">,</span>
    <span class="n">def_parameter</span><span class="p">,</span>
    <span class="n">def_intermediate</span><span class="p">,</span>
    <span class="n">def_return</span><span class="p">,</span>
<span class="p">)</span>

<span class="nd">@model</span><span class="p">(</span><span class="n">steps</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;_add_a_b&quot;</span><span class="p">,</span> <span class="s2">&quot;_add_ab_c&quot;</span><span class="p">])</span>
<span class="k">class</span> <span class="nc">AddABC</span><span class="p">:</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">def_parameter</span><span class="p">()</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">def_parameter</span><span class="p">()</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">def_parameter</span><span class="p">()</span>
    <span class="n">ab</span> <span class="o">=</span> <span class="n">def_intermediate</span><span class="p">()</span>
    <span class="n">abc</span> <span class="o">=</span> <span class="n">def_return</span><span class="p">()</span>

    <span class="nd">@step</span><span class="p">(</span><span class="n">uses</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span> <span class="n">impacts</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;ab&quot;</span><span class="p">])</span>
    <span class="k">def</span> <span class="nf">_add_a_b</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ab</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span>

    <span class="nd">@step</span><span class="p">(</span><span class="n">uses</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;ab&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">],</span> <span class="n">impacts</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;abc&quot;</span><span class="p">])</span>
    <span class="k">def</span> <span class="nf">_add_ab_c</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">abc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ab</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>
</pre></div>
</div>
</div>
</div>
<p>When calling the <code class="docutils literal notranslate"><span class="pre">def_*</span></code> functions we did not pass any arguments. These functions take a number of optional arguments add the ability to validate data passed to arguments as well as adds to the documentation of the model which will be covered in more detail in the <a class="reference internal" href="3-documenting-models.html"><span class="doc std std-doc">documentation tutorial</span></a>. To see a list of the available arguments you can see the <a class="reference internal" href="../../api.html"><span class="doc std std-doc">api section</span></a>.</p>
<p>Below is an example of how we can add validation to the model when adding arguments to <code class="docutils literal notranslate"><span class="pre">def_parameter</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">footings.validators</span> <span class="kn">import</span> <span class="n">value_min</span><span class="p">,</span> <span class="n">value_max</span><span class="p">,</span> <span class="n">in_</span>

<span class="nd">@model</span><span class="p">(</span><span class="n">steps</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;_add_a_b&quot;</span><span class="p">,</span> <span class="s2">&quot;_add_ab_c&quot;</span><span class="p">])</span>
<span class="k">class</span> <span class="nc">AddABC</span><span class="p">:</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">def_parameter</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="n">value_min</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">def_parameter</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="n">value_max</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">def_parameter</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="n">in_</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]))</span>
    <span class="n">ab</span> <span class="o">=</span> <span class="n">def_intermediate</span><span class="p">()</span>
    <span class="n">abc</span> <span class="o">=</span> <span class="n">def_return</span><span class="p">()</span>

    <span class="nd">@step</span><span class="p">(</span><span class="n">uses</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span> <span class="n">impacts</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;ab&quot;</span><span class="p">])</span>
    <span class="k">def</span> <span class="nf">_add_a_b</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ab</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span>

    <span class="nd">@step</span><span class="p">(</span><span class="n">uses</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;ab&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">],</span> <span class="n">impacts</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;abc&quot;</span><span class="p">])</span>
    <span class="k">def</span> <span class="nf">_add_ab_c</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">abc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ab</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ImportError</span><span class="g g-Whitespace">                               </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="n">c45eb716b984</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="kn">from</span> <span class="nn">footings.validators</span> <span class="kn">import</span> <span class="n">value_min</span><span class="p">,</span> <span class="n">value_max</span><span class="p">,</span> <span class="n">in_</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> 
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="nd">@model</span><span class="p">(</span><span class="n">steps</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;_add_a_b&quot;</span><span class="p">,</span> <span class="s2">&quot;_add_ab_c&quot;</span><span class="p">])</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="k">class</span> <span class="nc">AddABC</span><span class="p">:</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span>     <span class="n">a</span> <span class="o">=</span> <span class="n">def_parameter</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="n">value_min</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>

<span class="ne">ImportError</span>: cannot import name &#39;value_min&#39; from &#39;footings.validators&#39; (/home/runner/work/footings/footings/src/footings/validators.py)
</pre></div>
</div>
</div>
</div>
<div class="cell tag_raises-exception docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">AddABC</span><span class="p">(</span><span class="n">a</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_raises-exception docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">AddABC</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_raises-exception docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">AddABC</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="additional-def-functions">
<h2>Additional def_* functions<a class="headerlink" href="#additional-def-functions" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">footings</span></code> library also contains two additional define functions. Both of these will come in handy when building actuarial models.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">def_meta</span></code> is a way to add metadata to a model. As an example, this might be the run date/time a model is ran.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">def_sensitivity</span></code> is a way to add a default parameter. The name sensitivity is often used in actuarial models to test how sensitive an outcome is to a given parameter. As an example, an actuarial model might have an interest rate parameter and an interest rate sensitivity. The default value for the sensitivity would be 1 but could be changed to 1.1 to test the impact of a 10% increase in interest rates.</p></li>
</ul>
<p>Both of these are demonstrated in the code below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">footings.model</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">model</span><span class="p">,</span>
    <span class="n">step</span><span class="p">,</span>
    <span class="n">def_parameter</span><span class="p">,</span>
    <span class="n">def_sensitivity</span><span class="p">,</span>
    <span class="n">def_meta</span><span class="p">,</span>
    <span class="n">def_intermediate</span><span class="p">,</span>
    <span class="n">def_return</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">footings.model_tools</span> <span class="kn">import</span> <span class="n">run_date_time</span>

<span class="nd">@model</span><span class="p">(</span><span class="n">steps</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;_calculate&quot;</span><span class="p">])</span>
<span class="k">class</span> <span class="nc">DiscountFactors</span><span class="p">:</span>
    <span class="n">interest_rate</span> <span class="o">=</span> <span class="n">def_parameter</span><span class="p">()</span>
    <span class="n">interest_sensitivity</span> <span class="o">=</span> <span class="n">def_sensitivity</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">discount_factors</span> <span class="o">=</span> <span class="n">def_return</span><span class="p">()</span>
    <span class="n">run_date_time</span> <span class="o">=</span> <span class="n">def_meta</span><span class="p">(</span><span class="n">meta</span><span class="o">=</span><span class="n">run_date_time</span><span class="p">)</span>

    <span class="nd">@step</span><span class="p">(</span><span class="n">uses</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;interest_rate&quot;</span><span class="p">,</span> <span class="s2">&quot;interest_sensitivity&quot;</span><span class="p">],</span> <span class="n">impacts</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;discount_factors&quot;</span><span class="p">])</span>
    <span class="k">def</span> <span class="nf">_calculate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">rate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interest_rate</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">interest_sensitivity</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">discount_factors</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">1</span><span class="o">-</span><span class="n">rate</span><span class="p">)</span><span class="o">**</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
<p>As the code below shows, <code class="docutils literal notranslate"><span class="pre">interest_sensitivity</span></code> does not need to be set when instantiating the model. It will be assigned a default value of 1.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">discount</span> <span class="o">=</span> <span class="n">DiscountFactors</span><span class="p">(</span><span class="n">interest_rate</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;run_date_time = </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">discount</span><span class="o">.</span><span class="n">run_date_time</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;interest_sensitivity = </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">discount</span><span class="o">.</span><span class="n">interest_sensitivity</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;output = </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">discount</span><span class="o">.</span><span class="n">run</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>It can optionally be changed though as the code below shows.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">discount2</span> <span class="o">=</span> <span class="n">DiscountFactors</span><span class="p">(</span><span class="n">interest_rate</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">interest_sensitivity</span><span class="o">=</span><span class="mf">1.1</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;run_date_time = </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">discount2</span><span class="o">.</span><span class="n">run_date_time</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;interest_sensitivity = </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">discount2</span><span class="o">.</span><span class="n">interest_sensitivity</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;output = </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">discount2</span><span class="o">.</span><span class="n">run</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="closing">
<h2>Closing<a class="headerlink" href="#closing" title="Permalink to this headline">¶</a></h2>
<p>With this tutorial, we dug deeper into how the <code class="docutils literal notranslate"><span class="pre">Footings</span> <span class="pre">framework</span></code> defines attributes and how they are represented in the model. When building models, it is recommended to pass in optional arguments to the <code class="docutils literal notranslate"><span class="pre">def_*</span></code> functions to add validation.</p>
<p>Below is a summary of the functionality of each <code class="docutils literal notranslate"><span class="pre">def_*</span></code> function -</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>Define Function</p></th>
<th class="text-align:center head"><p>Init</p></th>
<th class="text-align:center head"><p>Default</p></th>
<th class="text-align:center head"><p>Frozen</p></th>
<th class="text-align:center head"><p>Return</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p>def_parameter</p></td>
<td class="text-align:center"><p>yes</p></td>
<td class="text-align:center"><p>no</p></td>
<td class="text-align:center"><p>yes</p></td>
<td class="text-align:center"><p>no</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>def_sensitivity</p></td>
<td class="text-align:center"><p>yes</p></td>
<td class="text-align:center"><p>yes</p></td>
<td class="text-align:center"><p>yes</p></td>
<td class="text-align:center"><p>no</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>def_meta</p></td>
<td class="text-align:center"><p>no</p></td>
<td class="text-align:center"><p>no</p></td>
<td class="text-align:center"><p>yes</p></td>
<td class="text-align:center"><p>no</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>def_intermediate</p></td>
<td class="text-align:center"><p>no</p></td>
<td class="text-align:center"><p>no</p></td>
<td class="text-align:center"><p>no</p></td>
<td class="text-align:center"><p>no</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>def_return</p></td>
<td class="text-align:center"><p>no</p></td>
<td class="text-align:center"><p>no</p></td>
<td class="text-align:center"><p>no</p></td>
<td class="text-align:center"><p>yes</p></td>
</tr>
</tbody>
</table>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="1-building-a-model.html" title="previous page">Building a Model</a>
    <a class='right-next' id="next-link" href="3-documenting-models.html" title="next page">Documenting Models</a>

              </div>
              
          </main>
          

      </div>
    </div>

    
  <script src="../../_static/js/index.d3f166471bb80abb5163.js"></script>


    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2020, Dustin Tindall.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.4.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>